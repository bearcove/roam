// @generated by roam-codegen
// DO NOT EDIT - regenerate with `cargo xtask codegen --typescript`

import type { Caller, ChannelingDispatcher, MethodDescriptor, RoamCall, ServiceDescriptor } from "@bearcove/roam-core";
import { CallBuilder, defaultHello, helloExchangeInitiator } from "@bearcove/roam-core";
import { RpcError } from "@bearcove/roam-core";
import { bindChannels, Rx, Tx } from "@bearcove/roam-core";
import { connectWs } from "@bearcove/roam-ws";

// Named type definitions
export type MathError =
  | { tag: "DivisionByZero" }
  | { tag: "Overflow" };

export interface Person {
  name: string;
  age: number;
  email: string | null;
}

export type LookupError =
  | { tag: "NotFound" }
  | { tag: "AccessDenied" };

export interface Point {
  x: number;
  y: number;
}

export interface Rectangle {
  top_left: Point;
  bottom_right: Point;
  label: string | null;
}

export type Color =
  | { tag: "Red" }
  | { tag: "Green" }
  | { tag: "Blue" };

export type Shape =
  | { tag: "Circle"; radius: number }
  | { tag: "Rectangle"; width: number; height: number }
  | { tag: "Point" };

export interface Canvas {
  name: string;
  shapes: Shape[];
  background: Color;
}

export type Message =
  | { tag: "Text"; value: string }
  | { tag: "Number"; value: bigint }
  | { tag: "Data"; value: Uint8Array };

// Request/Response type aliases
export type EchoRequest = [string];
export type EchoResponse = string;

export type ReverseRequest = [string];
export type ReverseResponse = string;

export type DivideRequest = [
  bigint, // dividend
  bigint, // divisor
];
export type DivideResponse = { ok: true; value: bigint } | { ok: false; error: MathError };

export type LookupRequest = [number];
export type LookupResponse = { ok: true; value: Person } | { ok: false; error: LookupError };

export type SumRequest = [Rx<number>];
export type SumResponse = bigint;

export type GenerateRequest = [
  number, // count
  Tx<number>, // output
];
export type GenerateResponse = void;

export type TransformRequest = [
  Rx<string>, // input
  Tx<string>, // output
];
export type TransformResponse = void;

export type EchoPointRequest = [Point];
export type EchoPointResponse = Point;

export type CreatePersonRequest = [
  string, // name
  number, // age
  string | null, // email
];
export type CreatePersonResponse = Person;

export type RectangleAreaRequest = [Rectangle];
export type RectangleAreaResponse = number;

export type ParseColorRequest = [string];
export type ParseColorResponse = Color | null;

export type ShapeAreaRequest = [Shape];
export type ShapeAreaResponse = number;

export type CreateCanvasRequest = [
  string, // name
  Shape[], // shapes
  Color, // background
];
export type CreateCanvasResponse = Canvas;

export type ProcessMessageRequest = [Message];
export type ProcessMessageResponse = Message;

export type GetPointsRequest = [number];
export type GetPointsResponse = Point[];

export type SwapPairRequest = [[number, string]];
export type SwapPairResponse = [string, number];

// Caller interface for Testbed
export interface TestbedCaller {
  /** Echoes the message back. */
  echo(message: string): CallBuilder<string>;
  /** Returns the message reversed. */
  reverse(message: string): CallBuilder<string>;
  /** Divides two numbers, returning an error if divisor is zero. */
  divide(dividend: bigint, divisor: bigint): CallBuilder<{ ok: true; value: bigint } | { ok: false; error: MathError }>;
  /** Looks up a user by ID, returning an error if not found. */
  lookup(id: number): CallBuilder<{ ok: true; value: Person } | { ok: false; error: LookupError }>;
  /**
   * Client sends numbers, server returns their sum.
   *
   * Tests: client→server streaming. Server receives via `Rx<T>`, returns scalar.
   */
  sum(numbers: Rx<number>): CallBuilder<bigint>;
  /**
   * Server streams numbers back to client.
   *
   * Tests: server→client streaming. Server sends via `Tx<T>`.
   */
  generate(count: number, output: Tx<number>): CallBuilder<void>;
  /**
   * Bidirectional: client sends strings, server echoes each back.
   *
   * Tests: bidirectional streaming. Server receives via `Rx<T>`, sends via `Tx<T>`.
   */
  transform(input: Rx<string>, output: Tx<string>): CallBuilder<void>;
  /** Echo a point back. */
  echoPoint(point: Point): CallBuilder<Point>;
  /** Create a person and return it. */
  createPerson(name: string, age: number, email: string | null): CallBuilder<Person>;
  /** Calculate the area of a rectangle. */
  rectangleArea(rect: Rectangle): CallBuilder<number>;
  /** Get a color by name. */
  parseColor(name: string): CallBuilder<Color | null>;
  /** Calculate the area of a shape. */
  shapeArea(shape: Shape): CallBuilder<number>;
  /** Create a canvas with given shapes. */
  createCanvas(name: string, shapes: Shape[], background: Color): CallBuilder<Canvas>;
  /** Process a message and return a response. */
  processMessage(msg: Message): CallBuilder<Message>;
  /** Return multiple points. */
  getPoints(count: number): CallBuilder<Point[]>;
  /** Test tuple types. */
  swapPair(pair: [number, string]): CallBuilder<[string, number]>;
}

// Client implementation for Testbed
export class TestbedClient implements TestbedCaller {
  private caller: Caller;

  constructor(caller: Caller) {
    this.caller = caller;
  }

  /** Echoes the message back. */
  echo(message: string): CallBuilder<string> {
    const descriptor = testbed_descriptor.methods[0];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.echo",
        args: { message },
        descriptor,
        metadata,
      });
      return value as string;
    });
  }

  /** Returns the message reversed. */
  reverse(message: string): CallBuilder<string> {
    const descriptor = testbed_descriptor.methods[1];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.reverse",
        args: { message },
        descriptor,
        metadata,
      });
      return value as string;
    });
  }

  /** Divides two numbers, returning an error if divisor is zero. */
  divide(
    dividend: bigint,
    divisor: bigint,
  ): CallBuilder<{ ok: true; value: bigint } | { ok: false; error: MathError }> {
    const descriptor = testbed_descriptor.methods[2];
    return new CallBuilder(async (metadata) => {
      try {
        const value = await this.caller.call({
          method: "Testbed.divide",
          args: { dividend, divisor },
          descriptor,
          metadata,
        });
        return { ok: true, value } as { ok: true; value: bigint } | { ok: false; error: MathError };
      } catch (e) {
        if (e instanceof RpcError && e.isUserError()) {
          return { ok: false, error: e.userError } as { ok: true; value: bigint } | { ok: false; error: MathError };
        }
        throw e;
      }
    });
  }

  /** Looks up a user by ID, returning an error if not found. */
  lookup(id: number): CallBuilder<{ ok: true; value: Person } | { ok: false; error: LookupError }> {
    const descriptor = testbed_descriptor.methods[3];
    return new CallBuilder(async (metadata) => {
      try {
        const value = await this.caller.call({
          method: "Testbed.lookup",
          args: { id },
          descriptor,
          metadata,
        });
        return { ok: true, value } as { ok: true; value: Person } | { ok: false; error: LookupError };
      } catch (e) {
        if (e instanceof RpcError && e.isUserError()) {
          return { ok: false, error: e.userError } as { ok: true; value: Person } | { ok: false; error: LookupError };
        }
        throw e;
      }
    });
  }

  /**
   * Client sends numbers, server returns their sum.
   *
   * Tests: client→server streaming. Server receives via `Rx<T>`, returns scalar.
   */
  sum(numbers: Rx<number>): CallBuilder<bigint> {
    const descriptor = testbed_descriptor.methods[4];
    // Bind any Tx/Rx channels in arguments and collect channel IDs
    const channels = bindChannels(
      descriptor.args.elements,
      [numbers],
      this.caller.getChannelAllocator(),
      this.caller.getChannelRegistry(),
    );
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.sum",
        args: { numbers },
        descriptor,
        channels,
        metadata,
      });
      return value as bigint;
    });
  }

  /**
   * Server streams numbers back to client.
   *
   * Tests: server→client streaming. Server sends via `Tx<T>`.
   */
  generate(count: number, output: Tx<number>): CallBuilder<void> {
    const descriptor = testbed_descriptor.methods[5];
    // Bind any Tx/Rx channels in arguments and collect channel IDs
    const channels = bindChannels(
      descriptor.args.elements,
      [count, output],
      this.caller.getChannelAllocator(),
      this.caller.getChannelRegistry(),
    );
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.generate",
        args: { count, output },
        descriptor,
        channels,
        metadata,
      });
      return value as void;
    });
  }

  /**
   * Bidirectional: client sends strings, server echoes each back.
   *
   * Tests: bidirectional streaming. Server receives via `Rx<T>`, sends via `Tx<T>`.
   */
  transform(input: Rx<string>, output: Tx<string>): CallBuilder<void> {
    const descriptor = testbed_descriptor.methods[6];
    // Bind any Tx/Rx channels in arguments and collect channel IDs
    const channels = bindChannels(
      descriptor.args.elements,
      [input, output],
      this.caller.getChannelAllocator(),
      this.caller.getChannelRegistry(),
    );
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.transform",
        args: { input, output },
        descriptor,
        channels,
        metadata,
      });
      return value as void;
    });
  }

  /** Echo a point back. */
  echoPoint(point: Point): CallBuilder<Point> {
    const descriptor = testbed_descriptor.methods[7];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.echoPoint",
        args: { point },
        descriptor,
        metadata,
      });
      return value as Point;
    });
  }

  /** Create a person and return it. */
  createPerson(name: string, age: number, email: string | null): CallBuilder<Person> {
    const descriptor = testbed_descriptor.methods[8];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.createPerson",
        args: { name, age, email },
        descriptor,
        metadata,
      });
      return value as Person;
    });
  }

  /** Calculate the area of a rectangle. */
  rectangleArea(rect: Rectangle): CallBuilder<number> {
    const descriptor = testbed_descriptor.methods[9];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.rectangleArea",
        args: { rect },
        descriptor,
        metadata,
      });
      return value as number;
    });
  }

  /** Get a color by name. */
  parseColor(name: string): CallBuilder<Color | null> {
    const descriptor = testbed_descriptor.methods[10];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.parseColor",
        args: { name },
        descriptor,
        metadata,
      });
      return value as Color | null;
    });
  }

  /** Calculate the area of a shape. */
  shapeArea(shape: Shape): CallBuilder<number> {
    const descriptor = testbed_descriptor.methods[11];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.shapeArea",
        args: { shape },
        descriptor,
        metadata,
      });
      return value as number;
    });
  }

  /** Create a canvas with given shapes. */
  createCanvas(name: string, shapes: Shape[], background: Color): CallBuilder<Canvas> {
    const descriptor = testbed_descriptor.methods[12];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.createCanvas",
        args: { name, shapes, background },
        descriptor,
        metadata,
      });
      return value as Canvas;
    });
  }

  /** Process a message and return a response. */
  processMessage(msg: Message): CallBuilder<Message> {
    const descriptor = testbed_descriptor.methods[13];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.processMessage",
        args: { msg },
        descriptor,
        metadata,
      });
      return value as Message;
    });
  }

  /** Return multiple points. */
  getPoints(count: number): CallBuilder<Point[]> {
    const descriptor = testbed_descriptor.methods[14];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.getPoints",
        args: { count },
        descriptor,
        metadata,
      });
      return value as Point[];
    });
  }

  /** Test tuple types. */
  swapPair(pair: [number, string]): CallBuilder<[string, number]> {
    const descriptor = testbed_descriptor.methods[15];
    return new CallBuilder(async (metadata) => {
      const value = await this.caller.call({
        method: "Testbed.swapPair",
        args: { pair },
        descriptor,
        metadata,
      });
      return value as [string, number];
    });
  }
}

/**
 * Connect to a Testbed server over WebSocket.
 * @param url - WebSocket URL (e.g., "ws://localhost:9000")
 * @returns A connected TestbedClient instance
 */
export async function connectTestbed(url: string): Promise<TestbedClient> {
  const transport = await connectWs(url);
  const connection = await helloExchangeInitiator(transport, defaultHello());
  return new TestbedClient(connection.asCaller());
}

// Handler interface for Testbed
export interface TestbedHandler {
  echo(message: string): Promise<string> | string;
  reverse(message: string): Promise<string> | string;
  divide(
    dividend: bigint,
    divisor: bigint,
  ): Promise<{ ok: true; value: bigint } | { ok: false; error: MathError }> | { ok: true; value: bigint } | {
    ok: false;
    error: MathError;
  };
  lookup(
    id: number,
  ): Promise<{ ok: true; value: Person } | { ok: false; error: LookupError }> | { ok: true; value: Person } | {
    ok: false;
    error: LookupError;
  };
  sum(numbers: Rx<number>): Promise<bigint> | bigint;
  generate(count: number, output: Tx<number>): Promise<void> | void;
  transform(input: Rx<string>, output: Tx<string>): Promise<void> | void;
  echoPoint(point: Point): Promise<Point> | Point;
  createPerson(name: string, age: number, email: string | null): Promise<Person> | Person;
  rectangleArea(rect: Rectangle): Promise<number> | number;
  parseColor(name: string): Promise<Color | null> | Color | null;
  shapeArea(shape: Shape): Promise<number> | number;
  createCanvas(name: string, shapes: Shape[], background: Color): Promise<Canvas> | Canvas;
  processMessage(msg: Message): Promise<Message> | Message;
  getPoints(count: number): Promise<Point[]> | Point[];
  swapPair(pair: [number, string]): Promise<[string, number]> | [string, number];
}

// Dispatcher for Testbed
export class TestbedDispatcher implements ChannelingDispatcher {
  constructor(private readonly handler: TestbedHandler) {}

  getDescriptor(): ServiceDescriptor {
    return testbed_descriptor;
  }

  async dispatch(method: MethodDescriptor, args: unknown[], call: RoamCall): Promise<void> {
    if (method.id === 0x9aabc4ba61fd5df3n) {
      try {
        const result = await this.handler.echo(args[0] as string);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0xcba154600f640175n) {
      try {
        const result = await this.handler.reverse(args[0] as string);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0xc3964cbee4b1d590n) {
      try {
        const result = await this.handler.divide(args[0] as bigint, args[1] as bigint);
        if (result.ok) call.reply(result.value);
        else call.replyErr(result.error);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0xe71a0faedd014e59n) {
      try {
        const result = await this.handler.lookup(args[0] as number);
        if (result.ok) call.reply(result.value);
        else call.replyErr(result.error);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0x855b3a25d97bfefdn) {
      try {
        const result = await this.handler.sum(args[0] as Rx<number>);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0x54d2273d8cdb9c38n) {
      try {
        const result = await this.handler.generate(args[0] as number, args[1] as Tx<number>);
        (args[1] as { close(): void }).close(); // close output before reply
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0x5d9895604eb18b19n) {
      try {
        const result = await this.handler.transform(args[0] as Rx<string>, args[1] as Tx<string>);
        (args[1] as { close(): void }).close(); // close output before reply
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0x453fa9bf6932528cn) {
      try {
        const result = await this.handler.echoPoint(args[0] as Point);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0x3dd231f57b1bca21n) {
      try {
        const result = await this.handler.createPerson(args[0] as string, args[1] as number, args[2] as string | null);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0xba75c48683f1d9e6n) {
      try {
        const result = await this.handler.rectangleArea(args[0] as Rectangle);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0xe285f31c6dfffbfcn) {
      try {
        const result = await this.handler.parseColor(args[0] as string);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0x6e706354167c00c2n) {
      try {
        const result = await this.handler.shapeArea(args[0] as Shape);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0xa914982e7d3c7b55n) {
      try {
        const result = await this.handler.createCanvas(args[0] as string, args[1] as Shape[], args[2] as Color);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0xed1dc0c625889d30n) {
      try {
        const result = await this.handler.processMessage(args[0] as Message);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0x5c8707f5ae4ccbccn) {
      try {
        const result = await this.handler.getPoints(args[0] as number);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    } else if (method.id === 0xacd19a29fe0d470cn) {
      try {
        const result = await this.handler.swapPair(args[0] as [number, string]);
        call.reply(result);
      } catch {
        call.replyInternalError();
      }
    }
  }
}

// Service descriptor for runtime schema-driven dispatch
export const testbed_descriptor: ServiceDescriptor = {
  service_name: "Testbed",
  methods: [
    {
      name: "echo",
      id: 0x9aabc4ba61fd5df3n,
      args: { kind: "tuple", elements: [{ kind: "string" }] },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "string" } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "reverse",
      id: 0xcba154600f640175n,
      args: { kind: "tuple", elements: [{ kind: "string" }] },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "string" } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "divide",
      id: 0xc3964cbee4b1d590n,
      args: { kind: "tuple", elements: [{ kind: "i64" }, { kind: "i64" }] },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "i64" } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [
              {
                name: "User",
                fields: {
                  kind: "enum",
                  variants: [{ name: "DivisionByZero", fields: null }, { name: "Overflow", fields: null }],
                },
              },
              { name: "UnknownMethod", fields: null },
              { name: "InvalidPayload", fields: null },
              { name: "Cancelled", fields: null },
            ],
          },
        }],
      },
    },
    {
      name: "lookup",
      id: 0xe71a0faedd014e59n,
      args: { kind: "tuple", elements: [{ kind: "u32" }] },
      result: {
        kind: "enum",
        variants: [{
          name: "Ok",
          fields: {
            kind: "struct",
            fields: {
              "name": { kind: "string" },
              "age": { kind: "u8" },
              "email": { kind: "option", inner: { kind: "string" } },
            },
          },
        }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [
              {
                name: "User",
                fields: {
                  kind: "enum",
                  variants: [{ name: "NotFound", fields: null }, { name: "AccessDenied", fields: null }],
                },
              },
              { name: "UnknownMethod", fields: null },
              { name: "InvalidPayload", fields: null },
              { name: "Cancelled", fields: null },
            ],
          },
        }],
      },
    },
    {
      name: "sum",
      id: 0x855b3a25d97bfefdn,
      args: { kind: "tuple", elements: [{ kind: "rx", element: { kind: "i32" } }] },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "i64" } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "generate",
      id: 0x54d2273d8cdb9c38n,
      args: { kind: "tuple", elements: [{ kind: "u32" }, { kind: "tx", element: { kind: "i32" } }] },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "struct", fields: {} } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "transform",
      id: 0x5d9895604eb18b19n,
      args: {
        kind: "tuple",
        elements: [{ kind: "rx", element: { kind: "string" } }, { kind: "tx", element: { kind: "string" } }],
      },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "struct", fields: {} } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "echoPoint",
      id: 0x453fa9bf6932528cn,
      args: { kind: "tuple", elements: [{ kind: "struct", fields: { "x": { kind: "i32" }, "y": { kind: "i32" } } }] },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "struct", fields: { "x": { kind: "i32" }, "y": { kind: "i32" } } } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "createPerson",
      id: 0x3dd231f57b1bca21n,
      args: {
        kind: "tuple",
        elements: [{ kind: "string" }, { kind: "u8" }, { kind: "option", inner: { kind: "string" } }],
      },
      result: {
        kind: "enum",
        variants: [{
          name: "Ok",
          fields: {
            kind: "struct",
            fields: {
              "name": { kind: "string" },
              "age": { kind: "u8" },
              "email": { kind: "option", inner: { kind: "string" } },
            },
          },
        }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "rectangleArea",
      id: 0xba75c48683f1d9e6n,
      args: {
        kind: "tuple",
        elements: [{
          kind: "struct",
          fields: {
            "top_left": { kind: "struct", fields: { "x": { kind: "i32" }, "y": { kind: "i32" } } },
            "bottom_right": { kind: "struct", fields: { "x": { kind: "i32" }, "y": { kind: "i32" } } },
            "label": { kind: "option", inner: { kind: "string" } },
          },
        }],
      },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "f64" } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "parseColor",
      id: 0xe285f31c6dfffbfcn,
      args: { kind: "tuple", elements: [{ kind: "string" }] },
      result: {
        kind: "enum",
        variants: [{
          name: "Ok",
          fields: {
            kind: "option",
            inner: {
              kind: "enum",
              variants: [{ name: "Red", fields: null }, { name: "Green", fields: null }, {
                name: "Blue",
                fields: null,
              }],
            },
          },
        }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "shapeArea",
      id: 0x6e706354167c00c2n,
      args: {
        kind: "tuple",
        elements: [{
          kind: "enum",
          variants: [{ name: "Circle", fields: { "radius": { kind: "f64" } } }, {
            name: "Rectangle",
            fields: { "width": { kind: "f64" }, "height": { kind: "f64" } },
          }, { name: "Point", fields: null }],
        }],
      },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "f64" } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "createCanvas",
      id: 0xa914982e7d3c7b55n,
      args: {
        kind: "tuple",
        elements: [{ kind: "string" }, {
          kind: "vec",
          element: {
            kind: "enum",
            variants: [{ name: "Circle", fields: { "radius": { kind: "f64" } } }, {
              name: "Rectangle",
              fields: { "width": { kind: "f64" }, "height": { kind: "f64" } },
            }, { name: "Point", fields: null }],
          },
        }, {
          kind: "enum",
          variants: [{ name: "Red", fields: null }, { name: "Green", fields: null }, { name: "Blue", fields: null }],
        }],
      },
      result: {
        kind: "enum",
        variants: [{
          name: "Ok",
          fields: {
            kind: "struct",
            fields: {
              "name": { kind: "string" },
              "shapes": {
                kind: "vec",
                element: {
                  kind: "enum",
                  variants: [{ name: "Circle", fields: { "radius": { kind: "f64" } } }, {
                    name: "Rectangle",
                    fields: { "width": { kind: "f64" }, "height": { kind: "f64" } },
                  }, { name: "Point", fields: null }],
                },
              },
              "background": {
                kind: "enum",
                variants: [{ name: "Red", fields: null }, { name: "Green", fields: null }, {
                  name: "Blue",
                  fields: null,
                }],
              },
            },
          },
        }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "processMessage",
      id: 0xed1dc0c625889d30n,
      args: {
        kind: "tuple",
        elements: [{
          kind: "enum",
          variants: [{ name: "Text", fields: { kind: "string" } }, { name: "Number", fields: { kind: "i64" } }, {
            name: "Data",
            fields: { kind: "bytes" },
          }],
        }],
      },
      result: {
        kind: "enum",
        variants: [{
          name: "Ok",
          fields: {
            kind: "enum",
            variants: [{ name: "Text", fields: { kind: "string" } }, { name: "Number", fields: { kind: "i64" } }, {
              name: "Data",
              fields: { kind: "bytes" },
            }],
          },
        }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "getPoints",
      id: 0x5c8707f5ae4ccbccn,
      args: { kind: "tuple", elements: [{ kind: "u32" }] },
      result: {
        kind: "enum",
        variants: [{
          name: "Ok",
          fields: { kind: "vec", element: { kind: "struct", fields: { "x": { kind: "i32" }, "y": { kind: "i32" } } } },
        }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
    {
      name: "swapPair",
      id: 0xacd19a29fe0d470cn,
      args: { kind: "tuple", elements: [{ kind: "tuple", elements: [{ kind: "i32" }, { kind: "string" }] }] },
      result: {
        kind: "enum",
        variants: [{ name: "Ok", fields: { kind: "tuple", elements: [{ kind: "string" }, { kind: "i32" }] } }, {
          name: "Err",
          fields: {
            kind: "enum",
            variants: [{ name: "User", fields: null }, { name: "UnknownMethod", fields: null }, {
              name: "InvalidPayload",
              fields: null,
            }, { name: "Cancelled", fields: null }],
          },
        }],
      },
    },
  ],
};
