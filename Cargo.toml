[workspace]
resolver = "2"
members = [
    # New Rust implementation
    "rust/roam",
    "rust/roam-wire",
    "rust/roam-codec",
    "rust/roam-frame",
    "rust/roam-session",
    "rust/roam-hash",
    "rust/roam-schema",
    "rust/roam-shm",
    "rust/roam-codegen",
    "rust/roam-macros",
    "rust/roam-macros-parse",
    "rust/roam-stream",
    "rust/roam-websocket",
    "rust/subject-rust",
    # Test crates for build.rs codegen validation
    "rust/codegen-test-proto",
    "rust/codegen-test-consumer",
    # New compliance suite
    "spec/spec-proto",
    "spec/spec-tests",
    "xtask",
    # Experiments
    "rust/facet-experiments",
]
exclude = ["fuzz"]

default-members = [
    "rust/roam",
    "rust/roam-wire",
    "rust/roam-codec",
    "rust/roam-frame",
    "rust/roam-session",
    "rust/roam-hash",
    "rust/roam-schema",
    "rust/roam-shm",
    "rust/roam-codegen",
    "rust/roam-macros",
    "rust/roam-macros-parse",
    "rust/roam-stream",
]

[workspace.package]
version = "0.5.0"
edition = "2024"
rust-version = "1.91"
license = "MIT OR Apache-2.0"
repository = "https://github.com/bearcove/roam"

[workspace.dependencies]
# Internal crates
roam = { path = "rust/roam", version = "0.5.0" }
bytes = "1"
blake3 = "1.8"
cobs = "0.5.0"
tokio = { version = "1", features = ["sync", "rt", "time", "macros"] }
tokio-tungstenite = "0.26"

# facet ecosystem
facet = { git = "https://github.com/facet-rs/facet", branch = "main", features = ["camino"] }
facet-core = { git = "https://github.com/facet-rs/facet", branch = "main" }
facet-postcard = { git = "https://github.com/facet-rs/facet", branch = "main", features = ["jit", "camino"] }
facet-cargo-toml = { git = "https://github.com/bearcove/facet-cargo-toml", branch = "main" }

# Tracing
static_assertions = "1.1.0"

# Test utilities
ctor = "0.4"

[profile.release]
debug = 1
