[package]
name = "roam-session"
version.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
description = "Session/state machine (handshake, request_id/channel_id routing, flow control)"

[package.metadata]
[package.metadata.cargo-shear]
ignored = ["tracing"]

[package.metadata."docs.rs"]
rustdoc-args = ["--html-in-header", "arborium-header.html"]

[features]
tracing = ["dep:tracing"]
diagnostics = []

[dependencies]
facet.workspace = true
facet-json.workspace = true
facet-core.workspace = true
moire-types.workspace = true
facet-format.workspace = true
facet-path.workspace = true
facet-postcard.workspace = true
facet-pretty.workspace = true
facet-reflect.workspace = true
roam-frame.workspace = true
roam-wire.workspace = true
roam-task-local.workspace = true
tracing = { workspace = true, optional = true }
ulid.workspace = true
moire.workspace = true

# Native runtime
[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
tokio.workspace = true
futures-util = { version = "0.3", default-features = false, features = [
  "std",
  "async-await-macro",
] }

# WASM runtime
[target.'cfg(target_arch = "wasm32")'.dependencies]
wasm-bindgen-futures.workspace = true
futures-util = { version = "0.3", default-features = false, features = [
  "std",
  "async-await-macro",
] }

[dev-dependencies]
roam.workspace = true
