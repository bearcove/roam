[package]
name = "roam-websocket"
version.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
description = "WebSocket transport for roam â€” message-framed Link over tungstenite"

[package.metadata]

[package.metadata."docs.rs"]
rustdoc-args = ["--html-in-header", "arborium-header.html"]

[dependencies]
roam-types.workspace = true

[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
tokio = { workspace = true, features = ["net", "rt", "sync"] }
tokio-tungstenite.workspace = true
futures-util.workspace = true

[target.'cfg(target_arch = "wasm32")'.dependencies]
wasm-bindgen = "0.2"
js-sys = "0.3"
web-sys = { version = "0.3", features = [
  "WebSocket",
  "BinaryType",
  "MessageEvent",
  "CloseEvent",
  "ErrorEvent",
] }
futures-channel = "0.3"
futures-util = { version = "0.3", default-features = false, features = ["sink"] }
getrandom = { version = "0.3", features = ["wasm_js"] }

[dev-dependencies]
tokio = { workspace = true, features = ["rt-multi-thread", "macros"] }
